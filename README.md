# arduino_code
troche 開発用

# 2017年8月10日
- agli_sensor
  - nsmrさんが作成した小基盤用プログラム
  - 水温･水位･EC値(周波数で出てくる)を測定
  - 測定した値はI2C通信で親基板へ送信する
  - 共用体でデータを格納しているが，詳細はプログラムにある
  - 8月10日時点で動いていない

- agli_shield
  - ngmが作成した親基板用プログラム
  - 機能
    - 子基盤とのI2C通信
    - Wi-Fiモジュールとのシリアル通信
    - コマンドの処理
      - シリアル入力で文字列を受け取る
      - 割り込み処理でたまにやる
    - ポンプを動かす
    - 最初に起動してから何日たったかをEEPROMに記録して，日数に応じてポンプの間隔を変える

- 開発環境
  - arduino IDE
  - ソースコードはgithub
  - デバッグの流れ
    - IDEでコーディング
    - 基盤上についたマイコンへはAVRISPmk-2を使って書き込む
      - その際IDEの｢書き込み装置を使って書き込み｣みたいなボタンを使用する
    - シリアル変換モジュールを使って基盤ーPCをシリアル通信させる
      - シリアル変換器のRTX，DTX，GNDを基盤の対応するところにつなげればOK
